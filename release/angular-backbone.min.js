/**
 * Backbone proxy for AngularJS
 * @version v1.0.0
 * @link https://github.com/sroze/angular-backbone/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="angular-backbone"),function(a,b,c){"use strict";b.module("angular-backbone",[]).factory("BackboneModel",function(a,b){return Backbone.Model.extend({sync:function(){return a(Backbone.sync.apply(this,arguments))},proxy:function(){return this.angularProxy||(this.angularProxy=new b(this)),this.angularProxy}})}).factory("BackboneCollection",function(a,b){return Backbone.Collection.extend({sync:function(){return a(Backbone.sync.apply(this,arguments))},proxy:function(){return this.angularProxy||(this.angularProxy=new b(this)),this.angularProxy}})}).factory("BackbonePromiseProxy",function(a){return function(b){var c=a.defer();return b.done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}).progress(function(a){c.notify(a)}),c.promise}}).factory("BackboneCollectionProxy",function(a,b){return function(c){this.originalModels=c.models,a.proxifyPrototype(this,c),a.proxifyProperties(this,c),this.models=[];for(var d=0;d<this.originalModels.length;d++)this.models.push(new b(this.originalModels[d]))}}).factory("BackboneModelProxy",function(a){return function(b){this.originalModel=b,this.attributes=b.attributes,a.proxifyPrototype(this,b),a.proxifyProperties(this,b);for(var d in b.attributes)a.proxifyModelAttribute(this,b,d);var e=this.set,f=this;"function"==typeof e&&(this.set=function(d){f[d]==c&&a.proxifyModelAttribute(f,b,d),e.apply(f,arguments)})}}).factory("BackboneProxifier",function(){return{proxifyPrototype:function(a,b){for(var c in b.__proto__)"function"==typeof b[c]&&(a[c]=function(c){return function(){return b[c].apply(a,arguments)}}(c))},proxifyProperties:function(a,b){for(var c in b)this.proxifyProperty(a,b,c)},proxifyProperty:function(a,b,c){Object.defineProperty(a,c,{configurable:!0,get:function(a){return function(){return b[a]}}(c),set:function(a){return function(c){b[a]=c}}(c)})},proxifyModelAttribute:function(a,b,c){Object.defineProperty(a,c,{configurable:!0,get:function(a){return function(){return b.get(a)}}(c),set:function(a){return function(c){return b.set(a,c)}}(c)})}}})}(window,window.angular);